---
name: bloc-expert
description: Optimized for models. Single file BLoC + Freezed.
---

## üèó –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï MASON (–ü–†–ò–û–†–ï–¢–ï–¢)
–ï—Å–ª–∏ —é–∑–µ—Ä –ø—Ä–æ—Å–∏—Ç —Å–æ–∑–¥–∞—Ç—å BLoC, State –∏–ª–∏ Event:
1. –ü—Ä–æ–≤–µ—Ä—å `mason.yaml` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –Ω—É–∂–Ω—ã—Ö –±—Ä–∏–∫–æ–≤: `agent_bloc_expert`, `sealed_freezed_state`, `simple_freezed_event`.
2. –ï—Å–ª–∏ –±—Ä–∏–∫–∏ –µ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É:
   `mason make <brick_name> --name {{name}}`
3. –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –í–°–ï–ì–î–ê –∑–∞–ø—É—Å–∫–∞–π:
   `dart run build_runner build --delete-conflicting-outputs`


# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê (STRICT RULES)
–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∏—Ö –ø—Ä–∞–≤–∏–ª –≤–µ–¥–µ—Ç –∫ –ø–æ–ª–æ–º–∫–µ –ø—Ä–æ–µ–∫—Ç–∞.

## 1. –ó–ê–ü–†–ï–¢ –ù–ê –°–¢–ê–†–´–ô –°–ò–ù–¢–ê–ö–°–ò–° (DEPRECATED)
- ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û: `mapEventToState`.
- ‚úÖ –†–ê–ó–†–ï–®–ï–ù–û: –¢–æ–ª—å–∫–æ `on<Event>((event, emit) async { ... })` –∏–ª–∏ `on<Event>(_onMethod)`.
- ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û: `abstract class Event`.
- ‚úÖ –†–ê–ó–†–ï–®–ï–ù–û: –¢–æ–ª—å–∫–æ `sealed class {Name}Event with _${Name}Event`.

## 2. –§–ê–ô–õ–û–í–´–ï –°–í–Ø–ó–ò (FREEZED)
- –ï—Å–ª–∏ –≤ —Ñ–∞–π–ª–µ –µ—Å—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@freezed`, —Ç—ã –û–ë–Ø–ó–ê–ù –¥–æ–±–∞–≤–∏—Ç—å:
  `part '[filename].freezed.dart';`

## 3. CHECKLIST –ü–ï–†–ï–î –û–¢–í–ï–¢–û–ú (SELF-VALIDATION)
–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –∫–æ–¥, –ø—Ä–æ–≤–µ—Ä—å –ø–æ —Å–ø–∏—Å–∫—É:
1. –ï—Å—Ç—å –ª–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `sealed` –ø–µ—Ä–µ–¥ –∫–ª–∞—Å—Å–æ–º —Å–æ–±—ã—Ç–∏–π?
2. –ü—Ä–æ–ø–∏—Å–∞–Ω –ª–∏ `part` –∏–º–µ–Ω–Ω–æ –¥–ª—è freezed?
3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ `on<...>` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ë–ª–æ–∫–∞?

## 3. TRIGGER COMMANDS
- `gen-bloc [Name]`:
  1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª –ø–æ —à–∞–±–ª–æ–Ω—É –∏–∑ `/.agents/skills/library/bloc_template.dart`.
  2. –ó–∞–º–µ–Ω–∏ `@{{Name}}` –Ω–∞ –∏–º—è —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã, `@{{name}}` –Ω–∞ snake_case.
  3. –ù–∞–ø–∏—à–∏ –≤ —á–∞—Ç:  `dart run build_runner build --delete-conflicting-outputs`
  (–§–ª–∞–≥ --delete-conflicting-outputs –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–æ–≤).

## 4. NO-GO ZONE (–ó–ê–ü–†–ï–¢–´)
- –ù–ï–¢ —Ä—É—á–Ω–æ–º—É Equatable (—Ç–æ–ª—å–∫–æ Freezed).
- –ù–ï–¢ –ª–æ–≥–∏–∫–µ –≤ UI (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Bloc).
- –ù–ï–¢ —Å–ª–æ–∂–Ω—ã–º –≤–ª–æ–∂–µ–Ω–Ω—ã–º —Ç–µ—Ä–Ω–∞—Ä–Ω—ã–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º –≤ emit.

## üö´ –ö–ê–¢–ï–ì–û–†–ò–ß–ï–°–ö–ò –ó–ê–ü–†–ï–©–ï–ù–û (STRICT PROHIBITION)
- –ó–ê–ü–†–ï–©–ï–ù–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `mapEventToState`. –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û `on<Event>((event, emit) => ...)`.
- –ó–ê–ü–†–ï–©–ï–ù–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Equatable` –≤—Ä—É—á–Ω—É—é. –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û `@freezed`.
- –ó–ê–ü–†–ï–©–ï–ù–û —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ –∫–ª–∞—Å—Å—ã. –ò—Å–ø–æ–ª—å–∑—É–π `sealed class`.

–ï—Å–ª–∏ —Ñ–∞–π–ª —à–∞–±–ª–æ–Ω–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –≤ –Ω–µ–º –æ—à–∏–±–∫–∞ ‚Äî –û–°–¢–ê–ù–û–í–ò–°–¨ –∏ –ø–µ—Ä–µ—Å–ø—Ä–æ—Å–∏ –ø—É—Ç—å –∫ —à–∞–±–ª–æ–Ω—É. –ù–ï –ì–ï–ù–ï–†–ò–†–£–ô –∫–æ–¥ –∏–∑ —Å–≤–æ–µ–π –≥–æ–ª–æ–≤—ã.